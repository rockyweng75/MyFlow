import{_ as k,u as y,L as C,h as I,V as A,r as n,o as _,j as b,w as d,c as h,F,z as v,a as t,l as g,d as D,S as N}from"./index.a74f1f35.js";import{A as B}from"./actionType.ee836276.js";const O={props:["modelValue","disabled"],emits:["update:modelValue"],setup(m,{emit:o}){const r=y(),e=C({formData:"",forms:r.getters["form/forms"]});return I(()=>{e.formData=m.modelValue}),A(()=>{e.formData=m.modelValue}),{state:e,change:()=>{o("update:modelValue",e.formData)}}}};function U(m,o,r,e,f,V){const u=n("el-option"),p=n("el-option-group"),l=n("el-select");return _(),b(l,{modelValue:e.state.formData,"onUpdate:modelValue":o[0]||(o[0]=a=>e.state.formData=a),filterable:"",placeholder:"\u8ACB\u8F38\u5165\u8868\u55AEID",onChange:e.change},{default:d(()=>[(_(!0),h(F,null,v(e.state.forms,a=>(_(),b(p,{key:a.name,label:a.name},{default:d(()=>[(_(!0),h(F,null,v(a.children,i=>(_(),b(u,{key:i.id,label:i.name,value:i.id},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])}const T=k(O,[["render",U]]),z={props:["modelValue","add","disabled"],emits:["update:modelValue"],components:{FindForm:T,ActionType:B},setup(m,{emit:o}){const r=y(),e=C({dialogVisible:!1,selectedValue:{},model:[]});return m.modelValue.forEach(V=>{e.model.push({...V})}),I(()=>{r.dispatch("form/getForms")}),{state:e,add:()=>{e.model.push(e.selectedValue),o("update:modelValue",e.model),m.add(),e.dialogVisible=!1,e.selectedValue={}}}}},R={class:"dialog-footer"};function x(m,o,r,e,f,V){const u=n("el-button"),p=n("ActionType"),l=n("el-form-item"),a=n("el-input"),i=n("FindForm"),w=n("el-form"),c=n("el-dialog");return _(),h(F,null,[t(u,{type:"primary",onClick:o[0]||(o[0]=s=>e.state.dialogVisible=!0)},{default:d(()=>[g("\u65B0\u589E\u529F\u80FD\u8868\u55AE")]),_:1}),t(c,{title:"\u9078\u64C7\u529F\u80FD\u8868\u55AE",modelValue:e.state.dialogVisible,"onUpdate:modelValue":o[6]||(o[6]=s=>e.state.dialogVisible=s),width:"80%"},{footer:d(()=>[D("span",R,[t(u,{onClick:o[5]||(o[5]=s=>e.state.dialogVisible=!1)},{default:d(()=>[g("\u53D6\u6D88")]),_:1}),t(u,{type:"primary",onClick:e.add},{default:d(()=>[g(" \u78BA\u5B9A ")]),_:1},8,["onClick"])])]),default:d(()=>[t(w,{model:e.state.selectedValue,"label-width":"120px"},{default:d(()=>[t(l,{label:"\u529F\u80FD"},{default:d(()=>[t(p,{modelValue:e.state.selectedValue.ActionType,"onUpdate:modelValue":o[1]||(o[1]=s=>e.state.selectedValue.ActionType=s),placeholder:"\u8ACB\u9078\u64C7\u529F\u80FD"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u529F\u80FD\u540D\u7A31"},{default:d(()=>[t(a,{modelValue:e.state.selectedValue.ActionName,"onUpdate:modelValue":o[2]||(o[2]=s=>e.state.selectedValue.ActionName=s),placeholder:"\u8ACB\u9078\u64C7\u529F\u80FD\u540D\u7A31"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u6309\u9215\u540D\u7A31"},{default:d(()=>[t(a,{modelValue:e.state.selectedValue.ButtonName,"onUpdate:modelValue":o[3]||(o[3]=s=>e.state.selectedValue.ButtonName=s),placeholder:"\u8ACB\u9078\u64C7\u6309\u9215\u540D\u7A31"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u8868\u55AEID"},{default:d(()=>[t(i,{modelValue:e.state.selectedValue.FormId,"onUpdate:modelValue":o[4]||(o[4]=s=>e.state.selectedValue.FormId=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const E=k(z,[["render",x]]),L={props:["modelValue","disabled"],emits:["update:modelValue"],components:{ActionForm:E},setup(m,{emit:o}){y();const r=C({dialogVisible:!1,selectedValue:{},formId:null,model:[]});m.modelValue.forEach(l=>{r.model.push({...l})});const e=()=>r.model.filter(l=>!l.Delete).sort((l,a)=>l.OrderId-a.OrderId),f=l=>{var a=e();a[l].Delete=!0,a[l].OrderId=99,o("update:modelValue",r.model)},V=()=>{o("update:modelValue",r.model)},u=l=>{if(l!==0){var a=e();a[l-1].OrderId=l+1,a[l].OrderId=l,o("update:modelValue",r.model)}},p=l=>{if(l!==r.model.filter(i=>!i.Delete).length-1){var a=e();a[l+1].OrderId=l+1,a[l].OrderId=l+2,o("update:modelValue",r.model)}};return I(()=>{}),{state:r,addRow:V,up:u,down:p,deleteRow:f}}};function j(m,o,r,e,f,V){const u=n("ActionForm"),p=n("el-row"),l=n("el-table-column"),a=n("el-button"),i=n("el-table"),w=n("el-card");return _(),b(w,null,{header:d(()=>[t(p,{justify:"space-between"},{default:d(()=>[t(u,{modelValue:e.state.model,"onUpdate:modelValue":o[0]||(o[0]=c=>e.state.model=c),add:e.addRow},null,8,["modelValue","add"])]),_:1})]),default:d(()=>[t(i,{data:e.state.model.filter(c=>!c.Delete),"default-sort":{prop:"OrderId"}},{default:d(()=>[t(l,{prop:"OrderId",label:"\u9806\u5E8F",width:"90"}),t(l,{prop:"ActionTypeName",label:"\u529F\u80FD\u985E\u578B",width:"180"}),t(l,{label:"\u6309\u9215\u540D\u7A31",prop:"ButtonName",width:"180"}),t(l,{label:"\u8868\u55AE\u540D\u7A31",prop:"FormName",width:"180"}),t(l,{label:"\u522A\u9664",width:"120"},{default:d(c=>[t(a,{type:"text",size:"small",icon:"el-icon-close",circle:"",onClick:N(s=>e.deleteRow(c.$index),["prevent"])},null,8,["onClick"])]),_:1}),t(l,{label:"\u529F\u80FD",width:"120"},{default:d(c=>[t(a,{icon:"el-icon-sort-up",size:"mini",circle:"",onClick:s=>e.up(c.$index)},null,8,["onClick"]),t(a,{icon:"el-icon-sort-down",size:"mini",circle:"",onClick:s=>e.down(c.$index)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}const q=k(L,[["render",j]]);export{q as default};
