import{_ as y,u as k,L as v,g as S,h as I,r as s,o as b,c as h,a as t,w as a,l as g,d as N,F as C,z as O,j as R,S as A}from"./index.a74f1f35.js";import{A as T}from"./actionType.ee836276.js";const U={props:["modelValue","add","disabled"],emits:["update:modelValue"],components:{ActionType:T},setup(i,{emit:o}){const r=k(),e=v({dialogVisible:!1,selectedValue:{},model:[]});i.modelValue.forEach(u=>{e.model.push({...u})});const p=S(()=>r.getters["switchClass/options"]);return I(()=>{r.dispatch("switchClass/getList").then(()=>{})}),{state:e,add:()=>{if(e.selectedValue.Value){var u={...e.selectedValue};e.model.push(u),o("update:modelValue",e.model),i.add(),e.dialogVisible=!1,e.selectedValue={}}else alert("selected is null")},switchClasses:p}}},x={class:"dialog-footer"};function B(i,o,r,e,p,V){const u=s("el-button"),m=s("el-input"),l=s("el-form-item"),d=s("ActionType"),_=s("el-option"),w=s("el-select"),c=s("el-form"),f=s("el-dialog");return b(),h(C,null,[t(u,{type:"primary",onClick:o[0]||(o[0]=n=>e.state.dialogVisible=!0)},{default:a(()=>[g("\u65B0\u589E\u8DEF\u7531\u8207\u57F7\u884C\u689D\u4EF6")]),_:1}),t(f,{title:"\u9078\u64C7\u8DEF\u7531",modelValue:e.state.dialogVisible,"onUpdate:modelValue":o[6]||(o[6]=n=>e.state.dialogVisible=n),width:"80%"},{footer:a(()=>[N("span",x,[t(u,{onClick:o[5]||(o[5]=n=>e.state.dialogVisible=!1)},{default:a(()=>[g("\u53D6\u6D88")]),_:1}),t(u,{type:"primary",onClick:e.add},{default:a(()=>[g(" \u78BA\u5B9A ")]),_:1},8,["onClick"])])]),default:a(()=>[t(c,{model:e.state.selectedValue,"label-width":"120px"},{default:a(()=>[t(l,{label:"\u8DEF\u7531\u540D\u7A31"},{default:a(()=>[t(m,{modelValue:e.state.selectedValue.RouteName,"onUpdate:modelValue":o[1]||(o[1]=n=>e.state.selectedValue.RouteName=n),placeholder:"\u8ACB\u8F38\u5165\u8DEF\u7531\u540D\u7A31"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u52D5\u4F5C"},{default:a(()=>[t(d,{modelValue:e.state.selectedValue.ActionType,"onUpdate:modelValue":o[2]||(o[2]=n=>e.state.selectedValue.ActionType=n),placeholder:"\u8ACB\u9078\u64C7\u52D5\u4F5C"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u4E0B\u4E00\u500B\u968E\u6BB5ID"},{default:a(()=>[t(m,{modelValue:e.state.selectedValue.NextStageId,"onUpdate:modelValue":o[3]||(o[3]=n=>e.state.selectedValue.NextStageId=n),placeholder:"\u8ACB\u8F38\u5165\u4E0B\u4E00\u500B\u968E\u6BB5"},null,8,["modelValue"])]),_:1}),t(l,{label:"\u57F7\u884C\u689D\u4EF6"},{default:a(()=>[t(w,{modelValue:e.state.selectedValue.SwitchClass,"onUpdate:modelValue":o[4]||(o[4]=n=>e.state.selectedValue.SwitchClass=n),placeholder:"\u8ACB\u9078\u64C7\u57F7\u884C\u689D\u4EF6"},{default:a(()=>[(b(!0),h(C,null,O(e.switchClasses,n=>(b(),R(_,{key:n.Key,label:n.Key,value:n.Value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const D=y(U,[["render",B]]),z={props:["modelValue","disabled"],emits:["update:modelValue"],components:{StageRoute:D},setup(i,{emit:o}){k();const r=v({dialogVisible:!1,selectedValue:{},formId:null,model:[]});i.modelValue.forEach(l=>{r.model.push({...l})});const e=()=>r.model.filter(l=>!l.Delete).sort((l,d)=>l.OrderId-d.OrderId),p=l=>{var d=e();d[l].Delete=!0,d[l].OrderId=99,o("update:modelValue",r.model)},V=()=>{o("update:modelValue",r.model)},u=l=>{if(l!==0){var d=e();d[l-1].OrderId=l+1,d[l].OrderId=l,o("update:modelValue",r.model)}},m=l=>{if(l!==r.model.filter(_=>!_.Delete).length-1){var d=e();d[l+1].OrderId=l+1,d[l].OrderId=l+2,o("update:modelValue",r.model)}};return I(()=>{}),{state:r,addRow:V,up:u,down:m,deleteRow:p}}};function L(i,o,r,e,p,V){const u=s("StageRoute"),m=s("el-row"),l=s("el-table-column"),d=s("el-button"),_=s("el-table"),w=s("el-card");return b(),R(w,null,{header:a(()=>[t(m,{justify:"space-between"},{default:a(()=>[t(u,{modelValue:e.state.model,"onUpdate:modelValue":o[0]||(o[0]=c=>e.state.model=c),add:e.addRow},null,8,["modelValue","add"])]),_:1})]),default:a(()=>[t(_,{data:e.state.model.filter(c=>!c.Delete),"default-sort":{prop:"OrderId"}},{default:a(()=>[t(l,{prop:"ActionType",label:"\u52D5\u4F5C\u985E\u578B",width:"180"}),t(l,{prop:"NextStageId",label:"\u4E0B\u4E00\u95DC\u7DE8\u865F",width:"90"}),t(l,{prop:"RouteName",label:"\u8DEF\u7531\u540D\u7A31",width:"180"}),t(l,{prop:"SwitchClass",label:"\u57F7\u884C\u689D\u4EF6",width:"180"}),t(l,{label:"\u522A\u9664",width:"120"},{default:a(c=>[t(d,{type:"text",size:"small",icon:"el-icon-close",circle:"",onClick:A(f=>e.deleteRow(c.$index),["prevent"])},null,8,["onClick"])]),_:1}),t(l,{label:"\u529F\u80FD",width:"120"},{default:a(c=>[t(d,{icon:"el-icon-sort-up",size:"mini",circle:"",onClick:f=>e.up(c.$index)},null,8,["onClick"]),t(d,{icon:"el-icon-sort-down",size:"mini",circle:"",onClick:f=>e.down(c.$index)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}const F=y(z,[["render",L]]);export{F as default};
