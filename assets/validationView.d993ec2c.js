import{_ as k,u as h,L as y,g as O,h as C,r,o as p,c as v,a,w as n,l as V,d as B,F as g,z as D,j as I,t as N,S as z}from"./index.a74f1f35.js";const L={props:["modelValue","add","disabled"],emits:["update:modelValue"],setup(c,{emit:t}){const s=h(),e=y({dialogVisible:!1,selectedValue:{},formId:null,model:[]});c.modelValue.forEach(i=>{e.model.push({...i})});const u=O(()=>s.getters["validation/options"]);return C(()=>{s.dispatch("validation/getList")}),{state:e,add:()=>{if(e.selectedValue.ValidateName){var i={...e.selectedValue};e.model.push(i),t("update:modelValue",e.model),c.add(),e.dialogVisible=!1,e.selectedValue={}}else alert("selected is null")},validations:u}}},R={class:"dialog-footer"};function E(c,t,s,e,u,f){const i=r("el-button"),m=r("el-option"),l=r("el-select"),d=r("el-form-item"),_=r("el-form"),b=r("el-dialog");return p(),v(g,null,[a(i,{type:"primary",onClick:t[0]||(t[0]=o=>e.state.dialogVisible=!0)},{default:n(()=>[V("\u65B0\u589E\u6AA2\u6838\u9805\u76EE")]),_:1}),a(b,{title:"\u9078\u64C7\u6AA2\u6838\u9805\u76EE",modelValue:e.state.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=o=>e.state.dialogVisible=o),width:"80%"},{footer:n(()=>[B("span",R,[a(i,{onClick:t[2]||(t[2]=o=>e.state.dialogVisible=!1)},{default:n(()=>[V("\u53D6\u6D88")]),_:1}),a(i,{type:"primary",onClick:e.add},{default:n(()=>[V(" \u78BA\u5B9A ")]),_:1},8,["onClick"])])]),default:n(()=>[a(_,{model:e.state.selectedValue,"label-width":"120px"},{default:n(()=>[a(d,{label:"\u6AA2\u6838\u9805\u76EE"},{default:n(()=>[a(l,{modelValue:e.state.selectedValue,"onUpdate:modelValue":t[1]||(t[1]=o=>e.state.selectedValue=o),"value-key":"Key",placeholder:"\u8ACB\u9078\u64C7\u6B32\u6AA2\u6838\u9805\u76EE"},{default:n(()=>[(p(!0),v(g,null,D(e.validations,o=>(p(),I(m,{key:o.Key,label:o.Key,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const K=k(L,[["render",E]]),S={props:["modelValue","disabled"],emits:["update:modelValue"],components:{Validation:K},setup(c,{emit:t}){h();const s=y({dialogVisible:!1,selectedValue:{},formId:null,model:[]});c.modelValue&&c.modelValue.forEach(l=>{s.model.push({...l})});const e=()=>s.model.filter(l=>!l.Delete).sort((l,d)=>l.OrderId-d.OrderId),u=l=>{var d=e();d[l].Delete=!0,d[l].OrderId=99,t("update:modelValue",s.model)},f=()=>{t("update:modelValue",s.model)},i=l=>{if(l!==0){var d=e();d[l-1].OrderId=l+1,d[l].OrderId=l,t("update:modelValue",s.model)}},m=l=>{if(l!==s.model.filter(_=>!_.Delete).length-1){var d=e();d[l+1].OrderId=l+1,d[l].OrderId=l+2,t("update:modelValue",s.model)}};return C(()=>{}),{state:s,addRow:f,up:i,down:m,deleteRow:u}}};function U(c,t,s,e,u,f){const i=r("Validation"),m=r("el-row"),l=r("el-table-column"),d=r("el-button"),_=r("el-table"),b=r("el-card");return p(),I(b,null,{header:n(()=>[a(m,{justify:"space-between"},{default:n(()=>[a(i,{modelValue:e.state.model,"onUpdate:modelValue":t[0]||(t[0]=o=>e.state.model=o),add:e.addRow},null,8,["modelValue","add"])]),_:1})]),default:n(()=>[a(_,{data:e.state.model.filter(o=>!o.Delete),"default-sort":{prop:"OrderId"}},{default:n(()=>[a(l,{prop:"OrderId",label:"\u9806\u5E8F",width:"90"}),a(l,{label:"\u6AA2\u6838\u540D\u7A31",width:"180"},{default:n(o=>[V(N(o.row.ValidateName),1)]),_:1}),a(l,{label:"\u522A\u9664",width:"120"},{default:n(o=>[a(d,{type:"text",size:"small",icon:"el-icon-close",circle:"",onClick:z(w=>e.deleteRow(o.$index),["prevent"])},null,8,["onClick"])]),_:1}),a(l,{label:"\u529F\u80FD",width:"120"},{default:n(o=>[a(d,{icon:"el-icon-sort-up",size:"mini",circle:"",onClick:w=>e.up(o.$index)},null,8,["onClick"]),a(d,{icon:"el-icon-sort-down",size:"mini",circle:"",onClick:w=>e.down(o.$index)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})}const x=k(S,[["render",U]]);export{x as default};
