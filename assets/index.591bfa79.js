import{_ as h,u as k,f as l,g as d,L as S,h as y,X as v,r as u,i as C,o as p,c as b,k as x,j as A,w as _,l as B,t as w,a as D,A as F,F as N}from"./index.a74f1f35.js";import{C as V}from"./index.d95f35f4.js";const R={components:{CustomItems:V},props:{stageid:{type:[Number,String],required:!0},action:{type:String,required:!0},disabled:{type:Boolean}},setup(a,{emit:I}){const o=k(),e=l(!0),g=d(()=>o.getters["form/stageForm"]),i=d(()=>o.getters["form/stageItems"]),n=d(()=>o.getters["workItem/stageData"]),t=S({formData:{}}),f=()=>{i.value.forEach(s=>{t.formData[s.ItemValue]||(t.formData[s.ItemValue]="")})};y(()=>{o.dispatch("form/getStage",{id:a.stageid,action:a.action}).then(()=>{t.formData={...n.value},f(),e.value=!1})}),v("formData",t.formData),v("userInfo",t.userInfo);const m=l({}),c=l({}),r=l();return{state:t,items:i,data:n,form:g,refForm:m,customItems:r,fileAction:c,setRefForm:s=>{s!=null&&(m.value=s),r.value&&(c.value.uploadFile=r.value.uploadFile,c.value.commit=r.value.commit,c.value.rollback=r.value.rollback)},loading:e}}};function q(a,I,o,e,g,i){const n=u("CustomItems"),t=u("el-form"),f=u("el-card"),m=C("loading");return p(),b(N,null,[x((p(),A(f,{class:"green-card"},{header:_(()=>[B(w(e.form.StageName),1)]),default:_(()=>[D(t,{model:e.state.formData,ref:e.setRefForm},{default:_(()=>[D(n,{ref:"customItems",items:e.items,data:e.state.formData},null,8,["items","data"]),F(a.$slots,"default",{},void 0,!0)]),_:3},8,["model"])]),_:3})),[[m,e.loading]]),F(a.$slots,"button",{form:e.refForm,file:e.fileAction,data:e.state.formData},void 0,!0)],64)}const M=h(R,[["render",q],["__scopeId","data-v-73990041"]]);export{M as A};
